<% content_for :page_title do %>
  <%= t(:micro_cms_pages) %>
<% end %>

<% content_for :page_actions do %>
  <li>
    <%= button_link_to t(:new_micro_cms_page), cms_url_helper_lookup(:new_micro_cms_admin_page_path), icon: 'icon-plus' %>
  </li>
<% end %>

<table class="index sortable" id='listing_micro_cms_pages' data-sortable-link="<%= cms_url_helper_lookup :update_positions_micro_cms_admin_pages_url %>">
  <thead>
  <tr>
    <th class="no-border"></th>
    <th><%= t('key') %></th>
    <th><%= t('presentation') %></th>
    <th><%= t('parent') %></th>
    <th class="actions"></th>
  </tr>
  </thead>
  <tbody>
  <% @pages.each do |page| %>
    <tr class="<%= cycle('odd', 'even') %>" id="<%= spree_dom_id page %>">
      <td class="no-border"><span class="handle"></span></td>
      <td><%= page.key %></td>
      <td><%= page.presentation %></td>
      <td><%= page.parent.try :presentation %></td>
      <td class="actions">
        <%= link_to_edit(page, url: cms_url_helper_lookup(:edit_micro_cms_admin_page_path, page), no_text: true) %>
        &nbsp;
        <%= link_to_delete(page, url: cms_url_helper_lookup(:micro_cms_admin_page_path, page), no_text: true) %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
